# 📅 2026-02-04

## 🎯 목표
- Docker 기반 ROS 2 Jazzy 표준 개발 환경 고도화 및 워크스페이스 빌드 매커니즘 이해

## 📝 학습 내용
- [이론] ROS2 Workspace & Colcon Build Mechanism
    - `src`, `build`, `install`, `log`로 구성된 표준 워크스페이스 구조 파악.
    - `colcon`의 **의존성 기반 병렬 스케줄링(DAG)** 원리 학습.
    - `--symlink-install` 옵션을 통한 개발 생산성 향상 원리 이해.

- [실습] Docker 기반 환경 구축 및 워크스페이스 초기화
    - Ubuntu 24.04 + ROS2 Jazzy + vGPU(Arc) 가속 환경의 Dockerfile 완성.
    - WSLg 기반 GUI(QtCreator 등) 포워딩 실행 명령어 정립.
    - 컨테이너 내부 워크스페이스 수동 초기화 및 colcon build 수행.

## 🔍 설정 분석: `Dockerfile` & `Build`
- **핵심 코드 (DDS & GUI):**
  ```Dockerfile
  # DDS 미들웨어 및 도메인 최적화
  ENV RMW_IMPLEMENTATION=rmw_fastrtps_cpp
  ENV ROS_DOMAIN_ID=0

  # GPU 가속 드라이버 명시
  ENV MESA_D3D12_DEFAULT_ADAPTER_NAME=Arc
  ENV GALLIUM_DRIVER=d3d12
  ```
- **Build 매커니즘 분석:**
    - `colcon`은 `package.xml`을 분석하여 **방향성 비순환 그래프(DAG)** 를 생성하고, 의존 관계가 없는 패키지들을 멀티 스레드로 병렬 컴파일하여 하드웨어 자원 가동률을 극대화함. 


## 🔍 직면한 문제 & 해결 (Troubleshooting)
- **문제:** Docker 컨테이너 내에서 `qtcreator` 패키지를 찾지 못하는 오류 발생.

- **원인:** Ubuntu 24.04 기본 저장소에 `qtcreator`가 포함되지 않았거나 `universe` 저장소가 비활성화됨.

- **해결:** `software-properties-common` 설치 후 `add-apt-repository universe`를 Dockerfile에 추가하여 해결.

## 💡 인사이트 (오늘 깨달은 것)
- `--symlink-install`은 단순히 편리한 기능이 아니라, 시스템 자원을 아끼고 개발 사이클을 단축하는 심볼릭 링크 기반의 효율적인 배포 방식이라는 점이 인상적이었다.

- `colcon`이 얼마나 정교하게 Worker를 스케줄링하는지 체감할 수 있었다.

## 🔗 참고 자료
- [Blog] [ROS 2의 소개와 개발환경 구성](https://velog.io/@katinon/ROS2-ROS-2%EC%9D%98-%EC%86%8C%EA%B0%9C%EC%99%80-%EA%B0%9C%EB%B0%9C%ED%99%98%EA%B2%BD-%EA%B5%AC)
- [Blog] [심볼릭 링크 생성, 삭제, 수정](https://bravesuccess.tistory.com/306) 